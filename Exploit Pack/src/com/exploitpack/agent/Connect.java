/**
Exploit Pack - Security Framework for Exploit Developers
Copyright 2011 Juan Sacco http://exploitpack.com

This program is free software: you can redistribute it and/or modify it under the terms of the
GNU General Public License as published by the Free Software Foundation, either version 3 
or any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with this program. 
If not, see http://www.gnu.org/licenses/
 **/

package com.exploitpack.agent;

import java.io.IOException;

import com.exploitpack.main.OSValidator;

public class Connect {

	private static String OSType;

	public static void main(String[] args, String ShellCodeHost, String ShellCodePort) {
		Runtime RunModule = Runtime.getRuntime();

		// Instance OSValidator
		OSValidator CheckOS = new OSValidator();
		CheckOS.main(null);
		// OUT BORRAR DESP
		System.out.println(OSValidator.OSType);

		OSType = OSValidator.OSType;

		if (OSType.equals("Win")) {
			System.out.println("SHELLCODE: This is Windows");

			// Execute exploit WINDOWS
			try {

				String RunIt = "cmd.exe /T:0A /K start python "+"data/agent/agentconnect.py"+ " "+ShellCodeHost+ " "+ShellCodePort;

				System.out.println(RunIt);

				RunModule.exec(RunIt);

			} catch (IOException e1) {

				e1.printStackTrace();

			}

		} else if (OSType.equals("Unix")) {
			System.out.println("SHELLCODE: This is LINUX or Unix or MAC");
			// Execute exploit LINUX
			try {

				String RunIt = "python "+"data/agent/agentconnect.py"+ " "+ShellCodeHost+ " "+ShellCodePort;

				System.out.println(RunIt);

				RunModule.exec(RunIt);

			} catch (IOException e1) {

				e1.printStackTrace();

			}

		} else {
			System.out.println("Your OS is not supported!!");
			return;
		}
		

	}

}
